<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ld.gg.dao.ChatDao">
	<insert id="save_minigame_chat" parameterType="chat_mini">
		INSERT INTO MINI_GAME_CHAT 
		VALUES(#{mini_game_send_user}, #{mini_game_chat_content}, #{mini_game_chat_time})
	</insert>
	<select id="select_by_email_mentor_list" parameterType="String" resultType="String">
		select distinct mentor_email from my_mentoring where menti_email = 'asd@naver.com'
	</select>
	<insert id="insert_chat_list" parameterType="chatroom">
		insert into chat_room(chat_room_seq, chat_category, chat_send_user, chat_receive_user)
		values (null, #{chat_category}, #{chat_send_user}, #{chat_receive_user});
	</insert>
	<insert id="insert_chat_room" parameterType="chatroom" useGeneratedKeys="true" keyProperty="chat_room_seq">
		insert into chat_room(chat_room_seq, chat_category, chat_send_user, chat_receive_user)
		values (null, #{chat_category}, #{chat_send_user}, #{chat_receive_user})
		<selectKey resultType="int" keyProperty="chat_room_seq" order="AFTER">
			select last_insert_id()
		</selectKey>
	</insert>

	<select id="select_by_email_mentor_list" parameterType="int" resultType="chatlist">
		select chat_content, chat_time from chat_list where chat_room_seq = #{chatRoomSeq}
	</select>
</mapper>